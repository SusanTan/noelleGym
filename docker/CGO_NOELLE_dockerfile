FROM ubuntu:18.04

RUN apt-get update
RUN apt search cmake
RUN apt-get install -y curl
RUN apt-get update
RUN apt remove --purge --auto-remove gcc g++
RUN apt-get install -y vim make binutils wget  gawk sed  zlib1g-dev build-essential libtool autoconf unzip gcc-8 g++-8 bc 
RUN apt-get install -y libllvm-9-ocaml-dev libllvm9 llvm-9 llvm-9-dev llvm-9-doc llvm-9-examples llvm-9-runtime
RUN apt-get install -y clang-9 clang-tools-9 clang-9-doc libclang-common-9-dev libclang-9-dev libclang1-9 clang-format-9 python-clang-9 clangd-9 
RUN apt-get update
#RUN apt-get install -y cmake
RUN apt remove --purge --auto-remove cmake
RUN apt update
RUN apt install -y software-properties-common lsb-release
RUN apt clean all
RUN wget -O - https://apt.kitware.com/keys/kitware-archive-latest.asc 2>/dev/null | gpg --dearmor - |  tee /etc/apt/trusted.gpg.d/kitware.gpg >/dev/null
RUN apt-add-repository "deb https://apt.kitware.com/ubuntu/ $(lsb_release -cs) main"
RUN apt update
RUN apt install -y cmake
RUN apt-get install -y golang git

RUN update-alternatives --install /usr/bin/clang clang /usr/bin/clang-9 10
RUN update-alternatives --install /usr/bin/clang++ clang++ /usr/bin/clang++-9 10

RUN useradd --create-home --shell /bin/bash cgo22ae

ENV PATH=/usr/lib/llvm-9/bin/:$PATH
ENV LD_LIBRARY_PATH=/usr/lib/llvm-9/lib:$LD_LIBRARY_PATH

#USER cgo22ae
RUN mkdir -p /home/cgo22ae
WORKDIR /home/cgo22ae

COPY --chown=cgo22ae ./README.md /home/cgo22ae/README.md
COPY --chown=cgo22ae ./scripts /home/cgo22ae/scripts
COPY --chown=cgo22ae ./run_me.sh /home/cgo22ae/run_me.sh
COPY --chown=cgo22ae ./LICENSE /home/cgo22ae/LICENSE
COPY --chown=cgo22ae ./makefiles /home/cgo22ae/makefiles
COPY --chown=cgo22ae ./results /home/cgo22ae/results
COPY --chown=cgo22ae ./NOELLE /home/cgo22ae/NOELLE
COPY --chown=cgo22ae ./benchmarkSuites /home/cgo22ae/benchmarkSuites

CMD /bin/bash
